{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <link href="{% static 'css/output.css' %}" rel="stylesheet" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css"/>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/preload.js"></script>
    <script src="https://unpkg.com/htmx.org/dist/ext/response-targets.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>

    {% block head_extra %}{% endblock %}
</head>

<body class="flex flex-col min-h-screen font-sans antialiased text-gray-800">
    <header class="bg-white sticky top-0 z-50 shadow-sm">
      <div class="container mx-auto px-4 py-4 flex flex-wrap items-center justify-between relative">
        <nav class="hidden md:flex flex-row md:space-x-6 text-lg md:text-base font-medium order-2 md:order-1">
          <div class="relative">
            <button
              class="block px-3 py-2 text-gray-600 hover:text-green-500 rounded-md transition-colors duration-200 flex items-center text-lg"
              id="polizas-dropdown-button"
              onclick="document.getElementById('polizas-mega-menu').classList.toggle('hidden');"
            >
              Nuestras Pólizas
              <svg
                class="ml-1 h-4 w-4 transform transition-transform duration-200"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"
                ></path>
              </svg>
            </button>
            
            <div class="absolute w-max min-w-[1000px] rounded-lg shadow-xl bg-white border border-gray-200 p-4 hidden z-20" id="polizas-mega-menu" role="menu" aria-orientation="vertical" aria-labelledby="polizas-dropdown-button">
              <h3 class="text-lg font-bold text-gray-700 mb-3 border-b pb-2">Ofrecemos Lo Mejor Para Ti</h3>
              <div class="grid grid-cols-4 gap-x-6 gap-y-2" role="none">
            
                {% for i in "12345678901234567890"|make_list %}
                  <a
                    href="/poliza/{{ i }}"
                    class="block text-sm text-gray-700 hover:bg-green-50 hover:text-green-600 p-1.5 rounded-md transition-colors duration-150"
                    role="menuitem"
                  >
                    <i class="fa-solid fa-shield-halved mr-1 text-green-500"></i> Póliza de Ejemplo {{ i }}
                  </a>
                {% endfor %}
                
              </div>
            </div>
          </div>
        </nav>

        <div class="flex-grow flex justify-center md:flex-grow-0 md:justify-start order-1 md:order-2">
          <a href="{% url 'usuarios:inicio' %}" class="flex items-center">
            <img src="{% static 'img/logo.png' %}" alt="Logo Estar Seguros" class="h-40 mr-3" />
          </a>
        </div>
        
        <div class="w-full md:flex md:items-center md:w-auto mt-4 md:mt-0 hidden md:order-3" id="mobile-menu">
            <ul class="flex flex-col md:flex-row md:ml-4 mt-4 md:mt-0 space-y-3 md:space-y-0 md:space-x-4">
            {% if user.is_authenticated %}
            <li>
              <span class="block px-3 py-2 text-sm text-gray-600">
                Bienvenido, {{ user.first_name|default:user.username }}
              </span>
            </li>

            {% if user.is_staff %}
            <li>
              <a
                href="{% url 'usuarios:inicio_administrador' %}"
                class="block px-3 py-2 text-sm text-purple-700 hover:bg-purple-100 rounded-md transition-colors duration-200 font-semibold"
              >
                <i class="fa-solid fa-gauge-high mr-1"></i> Panel Admin
              </a>
            </li>
            {% else %}
            <li>
              <a
                href="{% url 'usuarios:inicio_cliente' %}"
                class="block px-3 py-2 text-sm text-purple-700 hover:bg-purple-100 rounded-md transition-colors duration-200 font-semibold"
              >
                <i class="fa-solid fa-user-circle mr-1"></i> Mi Panel
              </a>
            </li>
            {% endif %}

            <li>
              <a
                href="{% url 'usuarios:logout' %}"
                class="block px-3 py-2 text-sm text-red-600 hover:bg-red-100 rounded-md transition-colors duration-200"
              >
                Cerrar sesión
              </a>
            </li>

            {% else %}
            <li class="border-purple-600 border-1 rounded-md">
              <a
                href="#"
                class="block px-5 text-lg text-purple-800 font-semibold hover:text-black text-center"
              >
                Quiero cotizar
              </a>
            </li>
            <li class="border-[#5e351a] border-1 rounded-md">
              <a
                href="#"
                class="block px-5 text-lg text-[#633b20] font-semibold hover:text-black text-center"
              >
                Quiero pagar
              </a>
            </li>
            <li class="border-blue-300 border-1 rounded-md">
              <a
                href="{% url 'usuarios:login' %}"
                class="block px-3 text-lg text-blue-700 font-bold hover:text-black text-center"
              >
                Mi cuenta
              </a>
            </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </header>

    <main class="min-h-screen flex flex-col">
      {% block content %}{% endblock %}
    </main>

    {% block scripts_extra %}{% endblock %}
    <script>
      // Script para cerrar el menú al hacer clic fuera
      document.addEventListener('click', function(event) {
          const dropdown = document.getElementById('polizas-mega-menu');
          const button = document.getElementById('polizas-dropdown-button');
          
          if (dropdown && button && !button.contains(event.target) && !dropdown.contains(event.target)) {
              dropdown.classList.add('hidden');
          }
      });
    </script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script src="{% static 'js/base.js' %}"></script>
    {% include 'partials/chatbot_ui.html' %}
    <footer class="bg-white border-t border-gray-200 mt-16">
        <div class="max-w-7xl mx-auto px-6 py-10 text-center md:text-left">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <h3 class="text-xl font-bold text-purple-700 mb-3">
                Protegete con tu seguro confiable
              </h3>
              <p class="text-gray-600 text-sm">
                Protegemos lo que más valoras. Pólizas diseñadas para ti y tu
                familia.
              </p>
            </div>

            <div>
              <h3 class="text-lg font-semibold text-gray-700 mb-3">
                Enlaces útiles
              </h3>
              <ul class="space-y-2 text-gray-600 text-sm">
                <li>
                  <a href="{% url 'usuarios:inicio' %}" class="hover:text-purple-600 transition">Inicio</a>
                </li>
                <li>
                  <a href="{% url 'usuarios:registro' %}" class="hover:text-purple-600 transition">Registro</a>
                </li>
                <li>
                  <a href="{% url 'usuarios:login' %}" class="hover:text-purple-600 transition">Iniciar sesión</a>
                </li>
                <li>
                  <a href="/contacto/" class="hover:text-purple-600 transition">Contacto</a>
                </li>
              </ul>
            </div>

            <div>
              <h3 class="text-lg font-semibold text-gray-700 mb-3">
                Contáctanos
              </h3>
              <p class="text-gray-600 text-sm">Tel: +58 000-0000000</p>
              <p class="text-gray-600 text-sm">Email: info@estarseguros.com</p>
              <div class="flex justify-center md:justify-start space-x-4 mt-3">
                <a href="#" class="text-gray-500 hover:text-purple-600 transition" aria-label="Facebook">
                  <i class="fab fa-facebook text-xl"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-purple-600 transition" aria-label="Instagram">
                  <i class="fab fa-instagram text-xl"></i>
                </a>
                <a href="#" class="text-gray-500 hover:text-purple-600 transition" aria-label="Twitter">
                  <i class="fab fa-twitter text-xl"></i>
                </a>
              </div>
            </div>
          </div>

          <hr class="my-6 border-gray-300 opacity-40" />

          <div class="text-center text-sm text-gray-500">
            © {% now "Y" %} <span class="font-medium text-purple-700">Estar Seguros</span>. Todos los derechos reservados.
          </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>
</body>
</html>
